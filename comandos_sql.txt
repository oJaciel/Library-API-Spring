CREATE TABLE autor(
	id uuid NOT NULL PRIMARY KEY,
	nome VARCHAR(100) NOT NULL,
	data_nascimento DATE NOT NULL,
	nacionalidade VARCHAR(50) NOT NULL,
	data_cadastro timestamp,
	data_atualizacao timestamp,
	id_usuario uuid
);

CREATE TABLE livro(
	id uuid NOT NULL PRIMARY KEY,
	isbn VARCHAR(20) NOT NULL,
	titulo VARCHAR(150) NOT NULL,
	data_publicacao DATE NOT NULL,
	genero VARCHAR(30) NOT NULL,
	preco NUMERIC(18,2) NOT NULL,
	data_cadastro timestamp,
    data_atualizacao timestamp,
    id_usuario uuid,
	id_autor uuid NOT NULL REFERENCES autor(id),
	CONSTRAINT chk_genero CHECK (genero IN ('FICCAO', 'FANTASIA', 'MISTERIO', 'ROMANCE', 'BIOGRAFIA', 'CIENCIA'))
);

select l.titulo as titulo_livro, a.nome as nome_autor
from livro as l
join autor as a
on a.id = l.id_autor